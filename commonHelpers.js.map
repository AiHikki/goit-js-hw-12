{"version":3,"file":"commonHelpers.js","sources":["../src/scripts/iziToast.js","../src/scripts/lightbox.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport default function showMessage(message) {\n  iziToast.show({\n    close: false,\n    closeOnClick: true,\n    message,\n    messageColor: 'white',\n    timeout: 3000,\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n    position: 'topRight',\n    backgroundColor: 'red',\n    progressBar: false,\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport let lightbox = new SimpleLightbox('#gallery a', {\n  overlayOpacity: 0.5,\n  showCounter: false,\n});\n","import axios from 'axios';\n\nimport showMessage from './scripts/iziToast.js';\nimport { lightbox } from './scripts/lightbox.js';\n\nconst form = document.querySelector('#form'),\n  searchInput = document.querySelector('#searchInput'),\n  gallery = document.querySelector('#gallery'),\n  loadImagesBtn = document.querySelector('#loadBtn'),\n  loader = document.querySelector('.loader');\n\nlet windowScroll = innerHeight;\nlet page = 1;\nconst per_page = 40;\nlet userSearchRequest;\n\nwindow.scrollBy(0, windowScroll);\n\nform.addEventListener('submit', fetchImages);\nloadImagesBtn.addEventListener('click', loadImages);\n\nasync function fetchImages(e) {\n  e.preventDefault();\n  page = 1;\n  loader.classList.remove('hide');\n  loadImagesBtn.classList.add('hide');\n  gallery.innerHTML = '';\n\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n  userSearchRequest = searchInput.value;\n\n  try {\n    const response = await axios.get('', {\n      params: {\n        key: '41474300-2fa05bee877be877b8dc1781f',\n        q: userSearchRequest,\n        orientation: 'horizontal',\n        image_type: 'photo',\n        safesearch: true,\n        page,\n        per_page,\n      },\n    });\n    const images = response.data;\n    if (images.hits.length === 0) {\n      return showMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n\n    renderImages(images.hits);\n  } catch (error) {\n    showMessage('Oops... Something went wrong');\n  }\n}\n\nfunction renderImages(images) {\n  page += 1;\n\n  const markup = images.reduce(\n    (\n      html,\n      { webformatURL, largeImageURL, tags, likes, views, comments, downloads }\n    ) =>\n      html +\n      `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"image-desc\">\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Likes</div>\n            <div>${likes}</div>\n          </div>\n          <div class=\"image-desc-item\">\n             <div class=\"image-desc-label\">Views</div>\n             <div>${views}</div>\n          </div>\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Comments</div>\n            <div>${comments}</div>\n          </div>\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Downloads</div>\n            <div>${downloads}</div>\n          </div>\n        </div>\n      </li>\n      `,\n    ''\n  );\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  windowScroll = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n\n  loader.classList.add('hide');\n  loadImagesBtn.classList.remove('hide');\n  lightbox.refresh();\n}\n\nasync function loadImages() {\n  loader.classList.remove('hide');\n  loadImagesBtn.classList.add('hide');\n  const response = await axios.get('', {\n    params: {\n      key: '41474300-2fa05bee877be877b8dc1781f',\n      q: userSearchRequest,\n      orientation: 'horizontal',\n      image_type: 'photo',\n      safesearch: true,\n      page,\n      per_page,\n    },\n  });\n  const images = response.data;\n  const totalPages = Math.ceil(images.totalHits / per_page);\n\n  renderImages(images.hits);\n\n  if (page > totalPages) {\n    loadImagesBtn.classList.add('hide');\n    loader.classList.add('hide');\n    showMessage(\"We're sorry, but you've reached the end of search results.\");\n    return;\n  }\n}\n"],"names":["showMessage","message","iziToast","lightbox","SimpleLightbox","form","searchInput","gallery","loadImagesBtn","loader","windowScroll","page","per_page","userSearchRequest","fetchImages","loadImages","e","axios","images","renderImages","markup","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","totalPages"],"mappings":"owBAGe,SAASA,EAAYC,EAAS,CAC3CC,EAAS,KAAK,CACZ,MAAO,GACP,aAAc,GACd,QAAAD,EACA,aAAc,QACd,QAAS,IACT,aAAc,UACd,cAAe,WACf,SAAU,WACV,gBAAiB,MACjB,YAAa,EACjB,CAAG,CACH,CCbO,IAAIE,EAAW,IAAIC,EAAe,aAAc,CACrD,eAAgB,GAChB,YAAa,EACf,CAAC,ECDD,MAAMC,EAAO,SAAS,cAAc,OAAO,EACzCC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE3C,IAAIC,EAAe,YACfC,EAAO,EACX,MAAMC,EAAW,GACjB,IAAIC,EAEJ,OAAO,SAAS,EAAGH,CAAY,EAE/BL,EAAK,iBAAiB,SAAUS,CAAW,EAC3CN,EAAc,iBAAiB,QAASO,CAAU,EAElD,eAAeD,EAAYE,EAAG,CAC5BA,EAAE,eAAc,EAChBL,EAAO,EACPF,EAAO,UAAU,OAAO,MAAM,EAC9BD,EAAc,UAAU,IAAI,MAAM,EAClCD,EAAQ,UAAY,GAEpBU,EAAM,SAAS,QAAU,2BACzBJ,EAAoBP,EAAY,MAEhC,GAAI,CAYF,MAAMY,GAXW,MAAMD,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAK,qCACL,EAAGJ,EACH,YAAa,aACb,WAAY,QACZ,WAAY,GACZ,KAAAF,EACA,SAAAC,CACD,CACP,CAAK,GACuB,KACxB,GAAIM,EAAO,KAAK,SAAW,EACzB,OAAOlB,EACL,0EACR,EAGImB,EAAaD,EAAO,IAAI,CACzB,MAAC,CACAlB,EAAY,8BAA8B,CAC3C,CACH,CAEA,SAASmB,EAAaD,EAAQ,CAC5BP,GAAQ,EAER,MAAMS,EAASF,EAAO,OACpB,CACEG,EACA,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAExEP,EACA;AAAA;AAAA,mBAEaE;AAAA,sBACGD,WAAsBE;AAAA;AAAA;AAAA;AAAA;AAAA,mBAKzBC;AAAA;AAAA;AAAA;AAAA,oBAICC;AAAA;AAAA;AAAA;AAAA,mBAIDC;AAAA;AAAA;AAAA;AAAA,mBAIAC;AAAA;AAAA;AAAA;AAAA,QAKf,EACJ,EAEErB,EAAQ,mBAAmB,YAAaa,CAAM,EAC9CV,EAAe,SACZ,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAE3BD,EAAO,UAAU,IAAI,MAAM,EAC3BD,EAAc,UAAU,OAAO,MAAM,EACrCL,EAAS,QAAO,CAClB,CAEA,eAAeY,GAAa,CAC1BN,EAAO,UAAU,OAAO,MAAM,EAC9BD,EAAc,UAAU,IAAI,MAAM,EAYlC,MAAMU,GAXW,MAAMD,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAK,qCACL,EAAGJ,EACH,YAAa,aACb,WAAY,QACZ,WAAY,GACZ,KAAAF,EACA,SAAAC,CACD,CACL,CAAG,GACuB,KAClBiB,EAAa,KAAK,KAAKX,EAAO,UAAYN,CAAQ,EAIxD,GAFAO,EAAaD,EAAO,IAAI,EAEpBP,EAAOkB,EAAY,CACrBrB,EAAc,UAAU,IAAI,MAAM,EAClCC,EAAO,UAAU,IAAI,MAAM,EAC3BT,EAAY,4DAA4D,EACxE,MACD,CACH"}